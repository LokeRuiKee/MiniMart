<!DOCTYPE html>
<html xml:lang>

<head>
    <title>Self Checkout System</title>
</head>

<body>
    <div>
        <h1 id="title">Self Check Out</h1>
    </div>
    <div class="row" id="mycontainer">
        <div class="column">
            <div class="row" id="guide">
                <p>
                    <b>
                        Show items clearly to the webcam one by one.
                        Wait for the current item to be added to the list before continuing with the next item.
                        If there is a duplicate, press the 'Delete' button on the item you want to delete.
                        Press 'Pay' when scanning items is complete.
                    </b>
                </p>

                <p>
                    <i>
                        Tunjukkan barang dengan jelas kepada kamera satu per satu.
                        Tunggu barang ditambahkan ke senarai sebelum meneruskan dengan barang seterusnya.
                        Jika terdapat pendua, tekan butang 'Delete' pada barang yang ingin dipadamkan.
                        Tekan 'Pay' apabila imbasan barang selesai.
                    </i>
                </p>
            </div>

            <div>
                <img id="videoElement" src="http://127.0.0.1:5000/video_feed" alt="Webcam Feed">
            </div>
        </div>

        <div class="column">
            <!--<button id="testAddItemBtn" onclick="testAddItem()">Add Item</button>-->
            <div id="tablecontainer">
                <table id="myTable">
                    <tr>
                        <th>Item</th>
                        <th>Quantity</th>
                        <th>Price (RM)</th>
                        <th>Delete item</th>
                    </tr>
                </table>

                <div>
                    <div class="column" style="text-align: left;">Total Amount: </div>
                    <div class="column" style="text-align: right;">RM<span id="total"></span></div>
                </div>

                <!-- Trigger/Open The Modal -->
                <button class="bottom button" id="paybtn" onclick="pay()">Pay</button>
            </div>

            <div id="modal" class="modal">
                <!-- Modal content -->
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Scan QR code to pay</h2>
                    </div>
                    <!--Modal body with image-->
                    <div class="modal-body">
                        <!--<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRrLIpz1toUZ8RDJTD7Tbh4t11rhYHo761Pw&s" />-->
                        <img src="dummy qr.png" />
                    </div>
                    <div class="modal-footer">
                        <button class="button" id="cancelbtn" data-dismiss="modal">
                            Cancel
                        </button>
                        <button class="button" id="completebtn" data-dismiss="modal">
                            Payment Complete
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="script_flask.js"></script>

</body>

</html>

<style>
    #container {
        width: 500px;
        height: 375px;
        border: 10px #333 solid;
    }

    #videoElement {
        width: 100%;
        background-color: #003459;
    }

    #title {
        text-align: center;
        align-items: center;
        /*background-color: #00A8E8;*/
    }

    #guide {
        width: 100%;
        margin-bottom: 10px;
        padding: 10px;
        background-color: #B9CDDA;
    }

    * {
        box-sizing: border-box;
    }

    /*.row {
        display: flex;
    } */

    /* Create two equal columns that floats next to each other */
    .column {
        float: left;
        width: 50%;
        padding: 10px;
    }

    /* Clear floats after the columns */
    .row:after {
        content: "";
        display: table;
        clear: both;
    }

    div.mycontainer {
        width: 100%;
        overflow: auto;
    }

        div.mycontainer div {
            width: 33%;
            float: left;
        }

    table {
        border-collapse: collapse;
        border-spacing: 0;
        width: 100%;
        border: 1px solid #ddd;
    }

    th,
    td {
        text-align: left;
        padding: 16px;
    }

    tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    tr:nth-child(odd) {
        background-color: white;
    }

    th {
        background-color: #6B7D7D;
    }

    #tablecontainer {
        padding: 10px;
        height: 612px;
        position: relative;
        background-color: #D7DAE5;
    }

    .bottom {
        margin: 0;
        position: absolute;
        top: 95%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
    }

    .button {
        margin: 5px;
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
    }

    /*modal to pay*/
    .modal {
        display: none; /* Hidden by default */
        width: 500px;
        background-color: #ffffff;
        border: 1px solid #cccccc;
        padding: 20px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0px 0px 10px #cccccc;
        border-radius: 10px;
        z-index: 1000;
    }

    .modal-body {
        display: flex;
        margin: 20px;
        justify-content: center;
    }

    .modal-footer {
        display: flex;
        justify-content: right;
    }
</style>